<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="last modified" content="27/09/2021 12:47:24"><meta name=abstract content><meta name=author content="dpavel@vmware.com"><meta name=primary-product-name content="MD2Docs-TestBed"><meta name=primary-product-version content="1"><meta name=description content><meta name=guid content="GUID-1Intro"><meta name=language content="en"><meta name=title content="Basic Markdown"><meta name=publication-author content="dpavel@vmware.com"><meta property="og:title" content="Basic Markdown"><meta property="og:image" content="https://docs-uat.vmware.com/uicontent/images/vmware-docs-default.png"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:locale" content="en"><meta property="og:url" content="https://docs-uat-staging.vmware.com/en/MD2Docs-TestBed/1/md-2-docs-test-bed/GUID-1Intro.html"><meta name=cdf-utag content="https://tags.tiqcdn.com/utag/vmware/cdf-privacy/qa/utag.js"><link rel=stylesheet type=text/css href=/validated-solutions/css/commonltr.css><link rel=stylesheet type=text/css href=/validated-solutions/css/non-draft.vmware.productdocs.css><link rel=canonical href=https://docs-uat-staging.vmware.com/en/MD2Docs-TestBed/1/md-2-docs-test-bed/GUID-1Intro.html><link class=user href=/validated-solutions/css/responsive.css rel=stylesheet type=text/css><link rel=icon href=https://www.vmware.com/favicon.ico type=image/x-icon><link rel=stylesheet href=/validated-solutions/css/v2-global.20200911172508.css><title>Docs Preview</title></head><body><header class=tech-pub-header><div id=header class="global-header col-12"><div class="row desktop-header h-100"><div class="col col-md-3 align-self-center header-logo-wrapper"><div class="d-inline-flex align-items-center justify-content-start w-100"><div class="d-inline-flex align-items-center w-100"><span class="my-auto d-md-none header-menu-icon"><i class="fa fa-bars"></i></span><h1><a href=https://docs-uat-staging.vmware.com/ class="d-inline-flex align-items-center my-auto nav-link header-logo-url pl-md-1 pl-xl-3"><span class=mr-2><img src=/validated-solutions/img/vm-logo.png alt="VMware Logo"></span>
<span class=vm-logo-title>Docs Preview</span></a></h1></div><div class=align-items-center><span id=toggleTOC class="d-md-none header-toc-icon"><i class="fa fa-ellipsis-v px-2"></i></span></div></div></div></div></div><div class="col-12 vmware-gradient w-100 px-0 mx-0"></div></header><div class="tech-pub-container main-container d-flex flex-column pubView"><section class="tech-pub-section d-flex flex-md-row"><div class="lhs lhs-container col-md-4 col-lg-3" style=display:block><div class=backdrop></div><div class=left-panel><div class="panel-header position-relative hidden-xs"><div class="panel-header-left d-flex justify-content-between align-items-center"><span class=container-collapse-expand><span id=expand-all-id class=expand-tree onclick=expandAll()><span class="lhs-expand-shape align-middle"><i class="fa fa-chevron-down"></i></span>
<span class="expand-text align-middle" data-i18n data-i18n-expand-all>Expand All</span></span>
<span id=collapse-all-id class="collapse-tree hide" onclick=collapseAll()><span class="lhs-collapse-shape align-middle"><i class="fa fa-chevron-up"></i></span>
<span class="collapse-text align-middle" data-i18n data-i18n-collapse-all>Collapse All</span></span></span></div></div><div class="panel-content p-2" id=left_toc><div class="dropdown collection-dropdown-container w-100"><button class="btn w-100 text-left dropdown-toggle collection-name" type=button id=collectionDropdwnBtn data-toggle=dropdown aria-haspopup=true aria-label="Collection Dropdown" aria-expanded=false>
<span class=label></span>
<span class="float-right icon-down pl-2 fa fa-angle-down"></span></button><div class="dropdown-menu w-100" id=collectionMenu aria-labelledby=collectionDropdwnBtn></div></div><div id=tree class=mt-2></div><div class="w-100 px-2 toc-product-container"><a class="mr-3 my-2 position-relative toc-product-link"><span class=toc-product-name></span>
<span class=localized-page-name>Product Documentation</span></a></div><ul class=rm-default-ul-styles></ul></div></div></div><div class="rhs rhs-container col-md-8 col-lg-7" style=display:block><div class=rhs-top><div class="rhs-top-container-top d-flex flex-row justify-content-between"><h1 class=primary-header id=configure-tanzu-saas-components-for-tanzu-for-kubernetes-operations>Configure Tanzu SaaS Components for Tanzu for Kubernetes Operations</h1></div><div class="rhs-top-container-middle d-flex flex-row justify-content-between"></div><div class=rhs-top-container-bottom><div class=last-updated-container><div class=calendar-icon><svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path class="clr-i-outline clr-i-outline-path-1" d="M32.25 6H29V8h3V30H4V8H7V6H3.75A1.78 1.78.0 002 7.81V30.19A1.78 1.78.0 003.75 32h28.5A1.78 1.78.0 0034 30.19V7.81A1.78 1.78.0 0032.25 6z"/><rect class="clr-i-outline clr-i-outline-path-2" x="8" y="14" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-3" x="14" y="14" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-4" x="20" y="14" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-5" x="26" y="14" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-6" x="8" y="19" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-7" x="14" y="19" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-8" x="20" y="19" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-9" x="26" y="19" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-10" x="8" y="24" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-11" x="14" y="24" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-12" x="20" y="24" width="2" height="2"/><rect class="clr-i-outline clr-i-outline-path-13" x="26" y="24" width="2" height="2"/><path class="clr-i-outline clr-i-outline-path-14" d="M10 10a1 1 0 001-1V3A1 1 0 009 3V9a1 1 0 001 1z"/><path class="clr-i-outline clr-i-outline-path-15" d="M26 10a1 1 0 001-1V3a1 1 0 00-2 0V9a1 1 0 001 1z"/><rect class="clr-i-outline clr-i-outline-path-16" x="13" y="6" width="10" height="2"/><rect x="0" y="0" width="36" height="36" fill-opacity="0"/></svg></div><span class=last-updated-label data-i18n-updated-on>Updated on</span>
&nbsp;
<span class=last-updated-date-ph>9/22/22</span></div></div></div><div class="rhs-center article-wrapper" id=content-div-id><h1 id=configure-tanzu-saas-components-for-tanzu-for-kubernetes-operations>Configure Tanzu SaaS Components for Tanzu for Kubernetes Operations</h1><p>VMware SaaS services for Tanzu for Kubernetes Operations provide additional Kubernetes lifecycle management, observability, and service mesh features. This document outlines the configuration needed to set up the following VMware SaaS services.</p><ul><li><a href=#tmc>Tanzu Mission Control</a> (TMC)</li><li><a href=#to>Tanzu Observability</a> (TO)</li><li><a href=#tsm>Tanzu Service Mesh</a> (TSM)</li></ul><h2 id=a-idtmc-a-tanzu-mission-control>Tanzu Mission Control</h2><p>Tanzu Mission Control (TMC) is a centralized management platform for operating and securing your Kubernetes infrastructure and modern applications across multiple teams and clouds.</p><p>You can manage your global portfolio of Kubernetes clusters from a centralized administrative interface by performing the following Tanzu Mission Control operations.</p><ul><li><p><a href=#tmc-tkg-mgmt>Registering Tanzu Kubernetes Grid management cluster</a></p></li><li><p><a href=#tmc-tkg-wl>Attaching the shared services and workload clusters</a></p><p><strong>Note:</strong> If the Tanzu Kubernetes Grid clusters are behind a proxy server, you&rsquo;ll need to import the proxy configuration object to Tanzu Mission Control before attaching the cluster.</p></li></ul><h3 id=manage-tanzu-kubernetes-cluster-lifecycle-from-tanzu-mission-control>Manage Tanzu Kubernetes Cluster Lifecycle from Tanzu Mission Control</h3><p>Managing Tanzu Kubernetes Clusters lifecycle from Tanzu Mission Control involves the following:</p><ol><li>Registering the cluster name with the Tanzu Mission Control cluster agent service.</li><li>Installing the cluster agent extensions on the cluster.</li></ol><h3 id=prerequisites>Prerequisites</h3><p>Before managing Tanzu Kubernetes Grid clusters lifecycle from Tanzu Mission Control, complete the following:</p><ul><li>Review <a href=https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-getstart/GUID-6BCCD353-CE6A-494B-A1E4-72304DC9FA7F.html>About Getting Started with VMware Tanzu Mission Control</a> for information about setting up and using VMware Tanzu Mission Control.</li><li>Ensure you have a subscription to Tanzu Mission Control.</li><li>Create a cluster group in Tanzu Mission Control.</li><li>Create a workspace in the Tanzu Mission Control.</li><li>Create the policies that are appropriate for your Tanzu Kubernetes Grid deployment.</li><li>Create a provisioner. A provisioner helps you deploy Tanzu Kubernetes Grid clusters across multiple different platforms, such as AWS and VMware vSphere.</li><li>Deploy Tanzu Kubernetes Grid management and workload clusters with the production plan.</li></ul><h3 id=a-idtmc-tkg-mgmt-a--register-a-tanzu-kubernetes-grid-management-cluster-with-tanzu-mission-control>Register a Tanzu Kubernetes Grid Management Cluster with Tanzu Mission Control</h3><p>After deploying your management cluster through the Tanzu Kubernetes Grid installer interface or the Tanzu CLI, follow these instructions in Tanzu Mission Control.</p><ol><li><p>Log in to Tanzu Mission Control from <a href=https://console.cloud.vmware.com>VMware Cloud Services</a>.</p></li><li><p>In the left navigation pane of the Tanzu Mission Control console, click <strong>Administration > Management clusters > Register Management Cluster</strong> and select Tanzu Kubernetes Grid.
<img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas01.jpg alt="Cluster Type Selection"></p></li><li><p>Enter a name for the cluster and select the cluster group in which you want to register the cluster. Optionally, provide a description and one or more labels.
<img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas02.jpg alt="Cluster Group Selection"></p></li><li><p>(Optional) If you are using a proxy to connect to the internet, you can configure the proxy settings by toggling the Set proxy option to yes, otherwise leave it disabled.
<img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas03.jpg alt="Proxy Option"></p><p>For information on registering a cluster that is behind a proxy with Tanzu Mission Control, please see the <a href=#configproxy>Create a Proxy Configuration Object in Tanzu Mission Control</a></p></li><li><p>On the Register page, Tanzu Mission Control generates a URL and a YAML file that defines how the management cluster connects to Tanzu Mission Control for registration. The credential provided in the YAML expires after 48 hours.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas04.jpg alt="Registration Link"></p></li><li><p>Copy the provided command, switch to the bootstrap machine or any other machine which has kubectl/tmc installed and has connectivity to the management cluster, and then run the command.</p><ul><li><p>To obtain admin <code>kubeconfig</code> of a cluster, execute the following command on the bootstrap machine:</p><p><code>tanzu cluster kubeconfig get &lt;cluster-name> -n &lt;namespace> --admin</code></p><p>Example:</p><pre tabindex=0><code>tanzu cluster kubeconfig get tkg-mgmt -n tkg-system --admin

Credentials of cluster &#39;tkg-mgmt&#39; have been saved

You can now access the cluster by running &#39;kubectl config use-context tkg-mgmt-admin@tkg-mgmt&#39;
</code></pre></li><li><p>Switch to the management cluster context</p><p><code>kubectl config use-context tkg-mgmt-admin@tkg-mgmt</code></p></li><li><p>Register the management cluster with Tanzu Mission Control</p><p><code>kubectl apply -f "&lt;TMC-Generated-URL>"</code></p><p>This command creates a namespace <code>vmware-system-tmc</code> and installs a set of cluster agent extensions, custom resource definitions, role bindings, services & deployments, etc into your cluster, which enables cluster communication with the Tanzu Mission Control.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas05.jpg alt="TMC Agent Installation"></p></li></ul></li><li><p>After the command is applied, wait for all pods to initialize in the namespace <code>vmware-system-tmc</code>. To monitor the pods status, use the following command:</p><p><code>kubectl get pods -n vmware-system-tmc</code></p></li><li><p>In Tanzu Mission Control console, click <strong>View Management Cluster</strong>.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas06.jpg alt="View Management Cluster"></p></li><li><p>Click on the <strong>Verify Connection</strong> button to validate that connection between the Workload cluster and Tanzu Mission Control portal has been established.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas06-1.jpg alt="Verify Connection"></p></li><li><p>After the connection is verified, the management cluster details page is displayed. It might take a few minutes for Tanzu Mission Control to start receiving health information from the management cluster.
<img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas07.jpg alt="Management Cluster Health Status"></p></li></ol><ul><li>(Optional) After you successfully register a management cluster, you can add any of the existing Tanzu Kubernetes Grid clusters that it manages to Tanzu Mission Control.</li></ul><h3 id=a-idtmc-tkg-wl-a--attach-a-tanzu-kubernetes-grid-workload-cluster-in-tanzu-mission-control>Attach a Tanzu Kubernetes Grid Workload Cluster in Tanzu Mission Control</h3><p>You can register Tanzu Kubernetes Grid workload clusters for lifecycle management. Follow these steps to attach a workload cluster:</p><ol><li><p>Log in to Tanzu Mission Control from <a href=https://console.cloud.vmware.com>VMware Cloud Services</a>.</p></li><li><p>In the left navigation pane of the Tanzu Mission Control console, click <strong>Clusters > Attach Cluster</strong>.</p><p><img src=/img/deployment-guides/tko-saas-services/attach-workload-cluster01.png alt="Attach Cluster"></p></li><li><p>Enter a name for the cluster and select the cluster group in which you want to register the cluster. Optionally, provide a description and one or more labels.
<img src=/img/deployment-guides/tko-saas-services/attach-workload-cluster02.png alt="Cluster name and Cluster Group"></p></li><li><p>Click <strong>Next</strong>.</p></li><li><p>(Conditionally required) Select a proxy configuration object for the cluster. You&rsquo;ll need to communicate through a proxy configuration object if the clusters are behind a proxy server.</p><p><strong>Note</strong>: For instructions on configuring the proxy, see <a href=#configproxy>Create a Proxy Configuration Object in Tanzu Mission Control</a></p><p><strong>Note</strong>: This document does not make use of proxy for workload clusters.</p></li><li><p>Click to toggle the <strong>Set proxy for this cluster</strong> option to <strong>No</strong>.</p><p><img src=/img/deployment-guides/tko-saas-services/attach-workload-cluster03.png alt="Proxy Option for Cluster"></p></li><li><p>Click <strong>Next</strong>.</p><p>Tanzu Mission Control generates a YAML manifest specifically for your cluster and displays the kubectl/tmc command to run the manifest.</p></li><li><p>Copy the provided command, switch to the bootstrap machine or any other machine that has kubectl/tmc installed and has connectivity to the cluster, and then run the command.</p><ul><li><p>If you attach using a proxy configuration object, make sure you have the latest version of the Tanzu Mission Control CLI (tmc) installed. Then run the <code>tmc</code> command, replacing &<code>&lt;kubeconfig></code> with the appropriate <code>kubeconfig</code> for the cluster.</p><p>To obtain the admin <code>kubeconfig</code> of a cluster, execute the following command on the bootstrap machine:</p><p><code>tanzu cluster kubeconfig get &lt;cluster-name> --admin --export-file &lt;file-name.yaml></code></p><p><img src=/img/deployment-guides/tko-saas-services/attach-workload-cluster04.png alt="Install TMC Agent"></p></li></ul></li><li><p>After executing the command, wait for all pods to initialize in the namespace <code>vmware-system-tmc</code>. To monitor the status of the pods, run the following command:<br><code>kubectl get pods -n vmware-system-tmc</code>
 </p></li><li><p>In Tanzu Mission Control console, click <strong>Verify Connection</strong>. You&rsquo;ll see a message confirming that the cluster was connection successfully.</p><p>![<a href=/img/deployment-guides/tko-saas-services/attach-workload-cluster05.png>Verify TMC Connection</a></p></li><li><p>Click <strong>View your Cluster</strong> to see the cluster details.</p><p><img src=/img/deployment-guides/tko-saas-services/attach-workload-cluster06.png alt="View Cluster Health"></p></li></ol><h3 id=a-idconfigproxy-asupplemental-information-create-a-proxy-configuration-object-in-tanzu-mission-control>Supplemental Information: Create a Proxy Configuration Object in Tanzu Mission Control</h3><p>If your Kubernetes clusters are behind a proxy server, you&rsquo;ll need a proxy configuration object to communicate with them. To create a proxy configuration object in Tanzu Mission Control, follow these steps:</p><ol><li>In the left navigation pane of the Tanzu Mission Control console, click <strong>Administration</strong>.</li><li>On the <strong>Administration</strong> page, click the <strong>Proxy Configuration</strong> tab.</li><li>Click <strong>Create Proxy Configuration</strong>.
<img src=/img/deployment-guides/tko-saas-services/tmc-proxy-configuration01.png alt="TMC Proxy Configuration"></li><li>On the <strong>Create proxy</strong> page, enter a name for the proxy configuration.</li><li>(Optional) Provide a description.</li><li>Specify the URL or IP address of the proxy server and the port for outbound traffic.</li><li>Enter the credentials (username and password) to use to permit outbound traffic through the proxy server.</li><li>(Optional) Enter an alternative server/port and username/password for HTTPS traffic.</li><li>(Optional) In <strong>No proxy list</strong>, specify a comma-separated list of outbound destinations that must bypass the proxy server.<br><img src=/img/deployment-guides/tko-saas-services/tmc-proxy-configuration02.png alt="Proxy Parameters"></li><li>Click <strong>Create</strong>. The proxy configuration is added to Tanzu Mission Control. Use this proxy configuration when you add a cluster that is sitting behind the proxy. Based on your environment, you can add multiple proxies in Tanzu Mission Control.<br><img src=/img/deployment-guides/tko-saas-services/tmc-proxy-configuration03.png alt></li></ol><h2 id=a-idto-a-tanzu-observability>Tanzu Observability</h2><p>Tanzu Observability (TO) delivers full-stack observability across containerized cloud applications, Kubernetes health, and cloud infrastructure through a Software-as-a-Service (SaaS) subscription model managed by VMware. The SaaS delivery model allows the solution to scale to meet your metrics requirements without the need to maintain the solution itself.</p><h3 id=set-up-tanzu-observability-to-monitor-a-tanzu-kubernetes-clusters>Set up Tanzu Observability to Monitor a Tanzu Kubernetes Clusters</h3><p>Setting up Tanzu Observability to monitor Tanzu Kubernetes Grid clusters is done through Tanzu Mission Control. Tanzu Mission Control provides a common management layer across Kubernetes clusters to configure multiple policies and make it possible to integrate the Kubernetes clusters with other SaaS solutions such as Tanzu Service Mesh.</p><h3 id=prerequisites-1>Prerequisites</h3><p>Before setting up Tanzu Observability, ensure that:</p><ul><li>You have an active Tanzu Mission Control subscription.</li><li>Tanzu Observability integration is enabled in Tanzu Mission Control.</li><li>A Tanzu Observability instance is provisioned for your organization.</li><li>A Service Account is created in Tanzu Observability to enable communication between Tanzu Observability and Tanzu Mission Control.</li><li>Tanzu Observability is enabled for your organization. If Tanzu Observability is not enabled, enable it by navigating to the <strong>Administration > Integrations</strong> tab in Tanzu Mission Control.</li></ul><h3 id=register-tanzu-kubernetes-grid-workload-cluster-with-tanzu-observability>Register Tanzu Kubernetes Grid Workload Cluster with Tanzu Observability</h3><p>To integrate Tanzu Observability on a cluster attached to Tanzu Mission Control, do the following:</p><ol><li><p>Create a service account in Tanzu Observability (TO) to enable communication between Tanzu Observability and Tanzu Mission Control.</p><ol><li>Log in to your Tanzu Observability instance (&lt;instance_name>.wavefront.com) as a user with Accounts, Groups & Roles permission.</li><li>From the gear icon on the top right, select <strong>Account Management</strong>.</li><li>Click the <strong>Service Accounts</strong> tab, then click <strong>Create New Account</strong> to create a service account and an associated API token.</li><li>Specify the service account name, optionally, provide a description, and click <strong>Create</strong>.
<img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas08.jpg alt="TO Service Account"></li><li>Select the newly created account and click the <strong>Copy to Clipboard</strong> icon in the <strong>Tokens</strong> row. You will paste this token into the <strong>Credentials</strong> field on Tanzu Mission Control.</li></ol></li><li><p>Enable Tanzu Observability in Tanzu Mission Control.</p><ol><li><p>Login to Tanzu Mission Control.</p></li><li><p>In the left navigation pane of the Tanzu Mission Control console, click <strong>Administration</strong>.</p></li><li><p>Click the <strong>Integrations</strong> tile.</p></li><li><p>From the available integrations options, enable <strong>Tanzu Observability</strong> if not yet enabled.<br><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas09.jpg alt="TMC Integration"></p></li><li><p>Under <strong>Administration</strong> switch to <strong>Accounts</strong>, click <strong>Create Account Credentials</strong> and select <strong>Tanzu Observability credential</strong>.</p></li><li><p>Enter the following and click <strong>Create</strong>:</p><ul><li>Credential Name</li><li>Tanzu Observability URL</li><li>Tanzu Observability API Token obtained in step 1<br><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas10.jpg alt="Create Credential"></li></ul></li></ol></li><li><p>On the Tanzu Mission Control console, click <strong>Clusters</strong> on the left navigation pane.</p></li><li><p>Click the cluster you want to add to Tanzu Observability.</p></li><li><p>On the cluster page, click <strong>Add Integration</strong>, and select <strong>Tanzu Observability</strong>.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas11.jpg alt="Enable TO Integration"></p></li><li><p>Select the Tanzu Observability credentials and click <strong>Confirm</strong>. </p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas12.jpg alt="Verify TO Credentials"></p><p>The Tanzu Mission Control adapter for Tanzu Observability appears in an unhealthy state for a few minutes while the required objects are being created on the cluster.<br><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas13.jpg alt="TO Adapter Status Unhealthy"></p><p>On the target cluster, you will see a new namespace, <code>tanzu-observability-saas</code>, and the required objects being created.<br><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas14.jpg alt="TO Namespace"></p></li><li><p>Wait for all the pods to successfully initialize.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas15.jpg alt="TO Pod and Services"></p></li><li><p>After all the pods are initialized, the Tanzu Mission Control adapter in the Tanzu Mission Control console appears in a healthy state.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas16.jpg alt="TO Adapter Status Healthy"></p><p>This confirms that the integration is completed and the cluster can be monitored with Tanzu Observability.</p></li><li><p>Click the Tanzu Observability link provided in Tanzu Mission Control or log in to your Tanzu Observability instance (&lt;instance_name>.wavefront.com) to ensure that the metrics are being collected in Tanzu Observability.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas17.jpg alt="TO Dashboard 01"></p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas18.jpg alt="TO Dashboard 02"></p></li></ol><h3 id=customize-tanzu-observability-dashboards>Customize Tanzu Observability Dashboards</h3><p>Tanzu Observability provides various out-of-the-box dashboards. You can customize the dashboards for your particular deployment. For information on how to customize Tanzu Observability dashboards for Tanzu for Kubernetes Operations, see <a href=tko-to-customized-dashboard.md>Customize Tanzu Observability Dashboard for Tanzu for Kubernetes Operations</a>.</p><h2 id=a-idtsm-atanzu-service-mesh>Tanzu Service Mesh</h2><p>VMware Tanzu Service Mesh (TSM) is an enterprise-class service mesh solution that provides consistent control and security for microservices, end-users, and data across all your clusters and clouds in multi-cluster and multi-cloud environments.</p><h3 id=onboard-a-tanzu-kubernetes-cluster-to-tanzu-service-mesh>Onboard a Tanzu Kubernetes Cluster to Tanzu Service Mesh</h3><p>You can onboard Tanzu Service Mesh with or without Tanzu Mission Control.</p><p>If you are installing user-managed packages, install them before onboarding your cluster in Tanzu Service Mesh or there may be issues with reconciling. Make sure to exclude the namespaces where you will be installing user-managed packages and other namespaces where you don&rsquo;t need istio injection by Tanzu Service Mesh.</p><h3 id=prerequisites-2>Prerequisites</h3><ul><li>(Conditionally required) An active Tanzu Mission Control subscription. Required only if you intend to onboard a cluster to Tanzu Service Mesh via Tanzu Mission Control.<ul><li>Ensure that the cluster to be onboarded to Tanzu Service Mesh is attached to Tanzu Mission Control.</li></ul></li><li>An active Tanzu Service Mesh subscription.</li><li>For workload cluster resource requirements, see <a href=https://docs.vmware.com/en/VMware-Tanzu-Service-Mesh/services/tanzu-service-mesh-environment-requirements-and-supported-platforms/GUID-D0B939BE-474E-4075-9A65-3D72B5B9F237.html>TSM requirements</a>*<ul><li><strong>Nodes</strong>: At least 3 worker nodes, each with at least 4,000 milliCPU (4 CPUs) of allocatable CPU and 6 GB of allocatable memory.</li><li><strong>DaemonSets</strong>: The DaemonSets instantiate a pod on every node on the cluster. To run the DaemonSets, Tanzu Service Mesh requires that every node in the cluster have at least 250 milliCPU and 650 MB of memory available.</li><li><strong>Ephemeral storage</strong>: 24 GB for the whole cluster and additionally 1 GB for each node.</li><li><strong>Pods</strong>: Tanzu Service Mesh requires a quota of at least 3 pods for each node on the cluster and additionally at least 30 pods for the whole cluster.</li></ul></li><li>If you want to install Tanzu Service Mesh only in some of the namespaces of the cluster, decide which namespaces you want to exclude from Tanzu Service Mesh.</li><li>If you want the cluster to connect to Tanzu Service Mesh through a proxy server, make sure that you know the details of the proxy configuration, such as the type of proxy in use (transparent or explicit), the protocol (HTTP or HTTPS), the host name or IP address of the proxy server, and the port number.</li><li>If your corporate proxy server is configured to use a certificate for secure TLS connections, make sure that you know the location of the certificate file. The Tanzu Service Mesh agent on the cluster will use the certificate to connect to the proxy server and trust the connection.</li></ul><p>Do the following to onboard a Tanzu Kubernetes Cluster to Tanzu Service Mesh using Tanzu Mission Control:</p><ol><li><p>Login to Tanzu Mission Control via VMware Cloud Services page.</p></li><li><p>In the left navigation pane of the Tanzu Mission Control console, click Clusters.</p></li><li><p>Click on the Target Cluster name, under integration click on Add Integrations, and select Tanzu Service Mesh.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas19.jpg alt="Add TSM Integration"></p><p>Note: You don&rsquo;t need to provide proxy configuration settings for clusters managed by Tanzu Mission Control in Tanzu Service Mesh. If you attached a cluster that is running behind a proxy server to Tanzu Mission Control and enabled Tanzu Service Mesh on that cluster, Tanzu Mission Control automatically forwards the proxy configuration to Tanzu Service Mesh. The Tanzu Service Mesh agent on the cluster uses the proxy configuration to connect the cluster to Tanzu Service Mesh through the proxy server.</p></li><li><p>In Add Tanzu Service Mesh integration you can choose to install Tanzu Service mesh on all namespaces or exclude specific namespaces.</p><p>Note:</p><ul><li>To install Tanzu Service Mesh in all the namespaces, select <code>Enable Tanzu Service Mesh on all Namespaces</code>. The system namespaces on the cluster, such as kube-system, kube-public, and istio-system, are excluded from Tanzu Service Mesh by default.</li><li>To exclude a specific namespace from Tanzu Service Mesh, choose Exclude Namespaces, select &ldquo;Is Exactly&rdquo; from the left drop-down menu under Exclude Namespaces, and then enter or select the name of the namespace from the right drop-down menu.</li><li>You can also specify the name of a namespace that you plan to create in the cluster at some point in the future.</li></ul><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas20.jpg alt="Namespace Exclusion"></p><ul><li>If you install user-managed packages such as Cert Manager, Contour, Prometheus, and Grafana, exclude the related namespaces for the user-managed packages:<ul><li>cert-manager</li><li>tanzu-system-monitoring</li><li>tanzu-system-dashboards</li><li>tanzu-system-ingress</li></ul></li></ul><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas23.png alt="Namespace Exclusion"></p></li><li><p>Click Confirm.</p></li></ol><ul><li><p>The Tanzu Mission Control adapter for Tanzu Observability appears in an unhealthy state for a few minutes because the required objects are being created on the cluster.</p></li><li><p>On the target cluster, you will see a new namespace vmware-system-tsm and required objects being created. When all the required Kubernetes objects are created and are in a running state, status of the Tanzu Mission Control adapter changes to OK.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas21.jpg alt="TSM Adapter Status"></p></li></ul><ol start=7><li><p>In the Tanzu Service Mesh console, go to Cluster Overview to validate the status of the cluster onboarding.</p><p><img src=/img/deployment-guides/tko-saas-services/tko-deploy-saas22.jpg alt="TSM Dashboard"></p></li></ol><p>The Tanzu Service Mesh console displays information about the infrastructure of the onboarded cluster and any microservices deployed on the cluster. Tanzu Service Mesh also starts monitoring and collecting infrastructure and service metrics, such as the number of nodes and services, requests per second, latency, and CPU usage, from the cluster. The Home page of the Tanzu Service Mesh console provides summary information about the cluster&rsquo;s infrastructure, a topology view of the services in the cluster, and key metrics.</p><p>If you have a multi-cluster or hybrid-cloud application, you can connect, secure, and manage the services in the application across the clusters with a global namespace. For more information, see <a href=https://docs.vmware.com/en/VMware-Tanzu-Service-Mesh/services/using-tanzu-service-mesh-guide/GUID-8D483355-6F58-4AAD-9EAF-3B8E0A87B474.html>Connect Services with a Global Namespace</a>.</p></div></div><div class="loader-container-toc col-lg-2 w-100" style=display:none><span class=spinner></span></div><div class="rhs-right-container d-none d-lg-block col-lg-2"><div class=rhs-right-panel><div class="rhs-right-panel-header d-flex justify-content-between"><div class=rhs-right-panel-title>In this article</div></div><div id=right-toc-div-id class="onpage-toc-container d-flex flex-column"><nav id=TableOfContents><ul><li><a href=#a-idtmc-a-tanzu-mission-control>Tanzu Mission Control</a><ul><li><a href=#manage-tanzu-kubernetes-cluster-lifecycle-from-tanzu-mission-control>Manage Tanzu Kubernetes Cluster Lifecycle from Tanzu Mission Control</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#a-idtmc-tkg-mgmt-a--register-a-tanzu-kubernetes-grid-management-cluster-with-tanzu-mission-control>Register a Tanzu Kubernetes Grid Management Cluster with Tanzu Mission Control</a></li><li><a href=#a-idtmc-tkg-wl-a--attach-a-tanzu-kubernetes-grid-workload-cluster-in-tanzu-mission-control>Attach a Tanzu Kubernetes Grid Workload Cluster in Tanzu Mission Control</a></li><li><a href=#a-idconfigproxy-asupplemental-information-create-a-proxy-configuration-object-in-tanzu-mission-control>Supplemental Information: Create a Proxy Configuration Object in Tanzu Mission Control</a></li></ul></li><li><a href=#a-idto-a-tanzu-observability>Tanzu Observability</a><ul><li><a href=#set-up-tanzu-observability-to-monitor-a-tanzu-kubernetes-clusters>Set up Tanzu Observability to Monitor a Tanzu Kubernetes Clusters</a></li><li><a href=#prerequisites-1>Prerequisites</a></li><li><a href=#register-tanzu-kubernetes-grid-workload-cluster-with-tanzu-observability>Register Tanzu Kubernetes Grid Workload Cluster with Tanzu Observability</a></li><li><a href=#customize-tanzu-observability-dashboards>Customize Tanzu Observability Dashboards</a></li></ul></li><li><a href=#a-idtsm-atanzu-service-mesh>Tanzu Service Mesh</a><ul><li><a href=#onboard-a-tanzu-kubernetes-cluster-to-tanzu-service-mesh>Onboard a Tanzu Kubernetes Cluster to Tanzu Service Mesh</a></li><li><a href=#prerequisites-2>Prerequisites</a></li></ul></li></ul></nav></div></div></div></section></div><footer class=tech-pub-footer><div id=page-footer><section class="footer-component footer-container"><div class=personalization_div_1 style=min-height:1px></div><div class=personalization_div_2 style=min-height:1px></div><div class=container><div class=content><div class=row><div class="col-lg-12 col-md-12"><footer class=footer><div class=row><div class="col-lg-2 col-md-12 mb-40 mt-3"><a class=footer-vmware-logo href=https://www-lt.vmware.com/ name="nav_footer : VMware Logo"><picture class=float-lg-left><source media=(max-width:800px) srcset=https://www-lt.vmware.com/content/dam/digitalmarketing/vmware/vm-logo-big.png.imgo.jpeg><img loading=lazy class=vmware-logo src=/validated-solutions/img/vm-logo-big.png alt=VMware title=VMware></picture></a></div></div></footer></div></div></div></div></section></div></footer><script src=/validated-solutions/js/pageStore.js></script>
<script src=/validated-solutions/js/main.js></script></body></html>